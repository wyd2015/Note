# spring容器初始化bean的过程
1. 实例化一个`ApplicationContext`对象；
2. 调用`BeanFactoryPostProcessor`完成扫描；
3. 循环解析扫描出来的类信息；
4. 实例化一个`BeanDefinition`对象来存储解析出来的信息；
5. 把实例化好的beanDefinition对象`put`到`beanDefinitionMap`中缓存起来，以便后面实例化bean；
6. 再次调用`BeanFactoryPostProcessor`；
7. spring调用`finishBeanFactoryInitialization()`方法来实例化单例的bean，实例化之前要做验证，需要遍历所有扫描出来的类，并依此判断这个bean是否`lazy`，是否`prorotype`，是否`abstract`等；
8. 如果验证完成，spring在实例化一个bean之前需要推断构造方法，因为spring实例化对象是通过构造方法反射，需要先知道具体的构造方法；
9. 推断构造方法之后，spring调用构造方法通过反射实例化一个对象。注意，此时对象已经实例化出来了，但此刻该对象并不是一个完整的bean，最简单的体现就是此时实例化出来的对象属性还没有注入，所以说它不是一个完整的bean；
10. spring处理合并后的beanDefinition；
11. 判断是否支持循环依赖，如果支持则提前把一个工厂存入`singletonFactories`的map中；
12. 判断是否需要完成`属性注入`；
13. 如果需要完成属性注入，开始注入属性；
14. 判断bean的类型回调`Aware`接口；
15. 调用生命周期回调方法；
16. 如果需要代理，则完成代理；
17. put到单例池；
18. bean实例化完成，存放到spring容器中。





-----BEGIN CERTIFICATE-----
MIIEnjCCA4agAwIBAgIULwCFdH2cC6DivbqcWSKHOFVN9DAwDQYJKoZIhvcNAQEL
BQAwgYsxCzAJBgNVBAYTAlVTMRkwFwYDVQQKExBDbG91ZEZsYXJlLCBJbmMuMTQw
MgYDVQQLEytDbG91ZEZsYXJlIE9yaWdpbiBTU0wgQ2VydGlmaWNhdGUgQXV0aG9y
aXR5MRYwFAYDVQQHEw1TYW4gRnJhbmNpc2NvMRMwEQYDVQQIEwpDYWxpZm9ybmlh
MB4XDTIwMDIxMzA4MzUwMFoXDTM1MDIwOTA4MzUwMFowYjEZMBcGA1UEChMQQ2xv
dWRGbGFyZSwgSW5jLjEdMBsGA1UECxMUQ2xvdWRGbGFyZSBPcmlnaW4gQ0ExJjAk
BgNVBAMTHUNsb3VkRmxhcmUgT3JpZ2luIENlcnRpZmljYXRlMIIBIjANBgkqhkiG
9w0BAQEFAAOCAQ8AMIIBCgKCAQEArRLr06g8GMrMLrrcouBuW7hCBZgV0jc5uKX5
cYOBaq+txYePv9NvB86bt3LnnU19f4Z7uY+MWgddbTCa5ADsApNmAAJQ9hOtos9I
gsgGIZSG42LfeG4p49E0ePBmAL7fwqEieUszm+LmZFpZXqiEZbMuxFyxgNeUYMFv
NMRssn+JqTCLLk62OECa+I2zty8fpmwTMpSvUhAGFQRbzQHBMKGO268d4QuWp30+
zDjjRRlV8TIU0vmFPPpHRNq/3Fs+L5o3CKpJlaEiqxtnoJ2Ds1kSH5GLHHEJxqBA
OEKOEYDJ47j+MFGhF6hOKx0OYlz96F6UDFy78EzLNG1vrvMhpwIDAQABo4IBIDCC
ARwwDgYDVR0PAQH/BAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMCBggrBgEFBQcD
ATAMBgNVHRMBAf8EAjAAMB0GA1UdDgQWBBQ2V+c9tRe4cSiDhFKM2kBYadPVmzAf
BgNVHSMEGDAWgBQk6FNXXXw0QIep65TbuuEWePwppDBABggrBgEFBQcBAQQ0MDIw
MAYIKwYBBQUHMAGGJGh0dHA6Ly9vY3NwLmNsb3VkZmxhcmUuY29tL29yaWdpbl9j
YTAhBgNVHREEGjAYggsqLmxhbzQ3Lnh5eoIJbGFvNDcueHl6MDgGA1UdHwQxMC8w
LaAroCmGJ2h0dHA6Ly9jcmwuY2xvdWRmbGFyZS5jb20vb3JpZ2luX2NhLmNybDAN
BgkqhkiG9w0BAQsFAAOCAQEAP69ee7k3iAkULKeJtsthsPKba+cMxtnfQ2rGasuL
e28gQfIymZIoHVCxyWGmQtUqSiHllNTGAwmyasra1qv6Rp1yE+dKRtsnrhOGVZOQ
jLA08g9gDkAIOtb13WGxTmrxpqy49F2PAFrcMnNJcMDydPuiK+0JrHwQ6J6iuX50
APYlT+lEK9isKJH7XAINIOxJOhQj7NUCUejRXmeWCev4ryNRCSDJQa53Qqcfhv9W
s7OF9Bbt8+JsY1lpD02/csOnFiidAGWdHUunrsvCcN9hev36XROjLvdmbNwh/HUy
/EFJovRCjEiEhjdUqeg/nSf62uxohPbMeVstIzpqTOnjGg==
-----END CERTIFICATE-----


-----BEGIN PRIVATE KEY-----
MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCtEuvTqDwYyswu
utyi4G5buEIFmBXSNzm4pflxg4Fqr63Fh4+/028Hzpu3cuedTX1/hnu5j4xaB11t
MJrkAOwCk2YAAlD2E62iz0iCyAYhlIbjYt94binj0TR48GYAvt/CoSJ5SzOb4uZk
WlleqIRlsy7EXLGA15RgwW80xGyyf4mpMIsuTrY4QJr4jbO3Lx+mbBMylK9SEAYV
BFvNAcEwoY7brx3hC5anfT7MOONFGVXxMhTS+YU8+kdE2r/cWz4vmjcIqkmVoSKr
G2egnYOzWRIfkYsccQnGoEA4Qo4RgMnjuP4wUaEXqE4rHQ5iXP3oXpQMXLvwTMs0
bW+u8yGnAgMBAAECggEAEx1R2lBsQrizED4m+/4ZchvJfuCrGEptH42FHRpPAr9g
S76LC76INq6E2B/ioKbcQ2dQ5s+Jyq+hi9ugX6oSZr5st3eKBYNq295UvczlkHPc
6eQTljNkgPqr9udl/JMYF2DAc/DwRDktBMxNrnyiErFVau5p1Db69iym4YcIEjaB
OPiz7rvw0Wh0FQ7tsZO5s1tqMgzsQaYt4ydD9n483ig5ujsJF8x1u9WuD/UVq+GU
C+6x5AZPAKHJCKHdCKxh28ymmF7I+SXIk94aI3+qyfINPV7SqWv7T7AzF9+d4rNZ
LG4IGLbV3SmEGm00UcH4G66kvbQkPQr/OJflum1rwQKBgQDSjGbqvO6nOvnGvARu
XxBFDzlN7YiSjNcNMA8LWPKO6+XoctpubjLrd+I45u79bu60E7M5l4Um7yYGn6Ly
Oy3AIiG+uT4VPVxrUkYYoRNoeZLIdzbF3SNt+UyRLxPlDeKYxvU0H+zP6MmXGcY+
XmuY8I9w964gShlVESAXaeJeFwKBgQDSb42uC2A3Qx7hVxkN3jBsIXOC78TMQCY+
PbGCDJAaanfjKDhg+I57Nx/fSSE8mQFA1I5syP5phJ9+dJbi+TI2h8IYEh1tAhVC
yJMrJfT7H9rUm2hHv/PRAi9wN9gV8GeEGHpYSpP6kJStu3zp8S/ubH/3bF2dhGpY
OvWwd+Ki8QKBgQDR0oexwOzYjSZkDfUghO4y1FQYO/KRkXeytcUYWuEG20G4H9Vc
ncdy73rrmABtYcLShJtkdoKEZWlwyl/ZpG4YfitA5VxgUFEsxsYCP2uW/yjvTBay
oolvTDUorlDWQLsj44pzEqmuHF/hjBcLCo+Rz5IzUzEdDpsmMjXX/3ZOqwKBgAH3
ELejW46ojc1E5vL+NC2OUmnSm1/c6X6DTPkN7PqSK/RvF7ewGoSEC0QmhqzuMNjO
I1ZYuid6GZMwu4f7E8D2m5Vl9ehisJgjD1zDyfneXkjF+r9Qx5IYFyFRJC9wQ0c0
g0/3wlIAr6K/sXbtzajIUpmY5XbnGachRdIUDIXBAoGAI6LRmjQB/UwEmQwHX0Q1
DsLVmn55ZEiUNI9qiHf2b+P1GnRsFFpXyNoey8RYhC6RXoKxe8IaskxOCzq86CMy
4GPoXITP53F7V/hV/qaGQAKB9q5jIgJIkzryDUAj/q9PdMQ/aQQmW6T5DBEUd6hl
qdGPdk5bMLSEtoIAg6YZTvk=
-----END PRIVATE KEY-----