# spring容器初始化bean的过程
1. 实例化一个`ApplicationContext`对象；
2. 调用`BeanFactoryPostProcessor`完成扫描；
3. 循环解析扫描出来的类信息；
4. 实例化一个`BeanDefinition`对象来存储解析出来的信息；
5. 把实例化好的beanDefinition对象`put`到`beanDefinitionMap`中缓存起来，以便后面实例化bean；
6. 再次调用`BeanFactoryPostProcessor`；
7. spring调用`finishBeanFactoryInitialization()`方法来实例化单例的bean，实例化之前要做验证，需要遍历所有扫描出来的类，并依此判断这个bean是否`lazy`，是否`prorotype`，是否`abstract`等；
8. 如果验证完成，spring在实例化一个bean之前需要推断构造方法，因为spring实例化对象是通过构造方法反射，需要先知道具体的构造方法；
9. 推断构造方法之后，spring调用构造方法通过反射实例化一个对象。注意，此时对象已经实例化出来了，但此刻该对象并不是一个完整的bean，最简单的体现就是此时实例化出来的对象属性还没有注入，所以说它不是一个完整的bean；
10. spring处理合并后的beanDefinition；
11. 判断是否支持循环依赖，如果支持则提前把一个工厂存入`singletonFactories`的map中；
12. 判断是否需要完成`属性注入`；
13. 如果需要完成属性注入，开始注入属性；
14. 判断bean的类型回调`Aware`接口；
15. 调用生命周期回调方法；
16. 如果需要代理，则完成代理；
17. put到单例池；
18. bean实例化完成，存放到spring容器中。