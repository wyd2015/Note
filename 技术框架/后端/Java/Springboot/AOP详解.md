# AOP详解
## 1. 概念：  
**[AOP]()**：`Aspect Oriented Program` 面向切面编程。
## 2. 原理：
`代理模式`在spring中的应用，再深入一点说就是 `Java动态代理开发`。
## 3. AOP出现的原因：  
Service层代码一般用于实现项目中的业务功能和额外功能。  
- 业务功能：主要业务逻辑的实现，如：  
>1. 业务运算;  
>2. DAO调用。
- 额外功能：不属于业务的功能，可有可无，如：  
>1. 事务；  
>2. 监控；  
>3. 日志。

那么，究竟是否需要在service层引入额外功能呢？  
>- 在软件设计者角度看，加入额外功能，不利于系统的维护；  
>- 在service调用者角度来看，需在service层加入额外功能，实现调用者对事务的管理需求、日志记录的需求、系统监控的需求等。

## 4. AOP术语：
1. `切面（aspect）`：用来切、插业务方法的`类`；
2. `连接点（joinpoint）`：切面类和业务类的连接点，其实就是封装了业务方法的一些基本属性，作为通知的参数来解析；
3. `通知（advice）`：在切面类中，声明对业务方法做额外处理的方法；
4. `切入点（pointcut）`：业务类中指定的方法，作为切面切入的点。其实就是指定某个方法作为切面的切入口；
5. `目标对象（target object）`：被代理对象；
6. `AOP代理（aop proxy）`：代理对象。

## 5. 代理
### 5.1 静态代理
所有的代理类都必须实实在在的写出来，每一个代理类都有自己的.class文件。  
`缺点`：
>代理类数量多，不利于项目管理；  
>额外功能冗余，不利于维护。

### 5.2 动态代理
通过代理类为原始类增加额外功能。  
[好处]()：更加方便对原始类的维护。
#### 5.2.1 动态代理开发步骤：
1. 准备原始对象，一般是service接口实现类。
```xml
<bean id="userService" class="com.ethan.aop.UserServiceImpl">
```
2. 通过implement Advice接口，实现额外功能。  
常见的Advice接口的4个子接口：  
    1. [MethodBeforeAdvice](#)：前置通知，额外功能的代码在原始方法之前执行，常用于权限管理；
    2. [AfterReturningAdvice](#)：后置通知，额外功能代码在原始方法执行之后执行；
    3. [MethodInterceptor](#)：环绕通知，包围切入点，额外功能代码在原始方法执行前、后均会执行一次；
    4. [ThrowsAdvice](#)：异常通知，原始方法抛出异常时执行额外功能代码。
    